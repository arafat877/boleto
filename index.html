<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <title>Crypto Boleto</title>

</head>

<body class="bg-info">
    <nav class="navbar navbar-expand-lg navbar-dark">
        <a class="navbar-brand" href="index.html">Boleto<i class="fa fa-bullseye ml-2"></i></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01"
            aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="novo.html">Novo<i class="fa fa-plus-circle ml-2"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="faq.html">Info<i class="fa fa-info-circle ml-2"></i></a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="jumbotron text-center text-white bg-info">
        <h1><i class="fa fa-bullseye fa-lg"></i></h1>
        <br>
        <h2>Pagamento Instantâneo em Ethereum</h2>
        <br>
        <p class="lead">Para encontrar um boleto acesse diretamente pelo link ou digite o hash do título.</p>
        <br>
        <form class="form my-2 my-lg-0" method="get" id="boletoForm" name="boletoForm">
            <div class="row align-items-center">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="titulo">Hash do Boleto</span>
                        </div>
                        <input type="text" class="form-control" id="boleto" name="boleto">
                    </div>
                </div>
                <div class="col-md-2"></div>
                <div class="col-md-12 mt-4">
                    <button class="btn btn-lg btn-primary" id="search" type="submit" onclick="obtemBoletoHash(); return false;">Encontrar Boleto</button>
                </div>
            </div>
        </form>
    </div>

    <div id="viewBoleto">

    </div>

                <!-- URL Scripts -->
                <script>
                    boletoURL = "laurea.test/boleto?"
                    language = navigator.language.substring(0, 2)
                    //language = "pt"
                    console.log(boletoURL + $('#boleto').val())
        
                    function getUrlVars() {
                        var vars = [],
                            hash;
                        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        
                        for (var i = 0; i < hashes.length; i++) {
                            hash = hashes[i].split('=');
                            vars.push(hash[0]);
                            vars[hash[0]] = hash[1];
                        }
                        return vars;
                    }
        
                    var boletoAddress = getUrlVars()[0]
        
                    if (boletoAddress.length == 66) {
                        $('#boleto').val(boletoAddress)
                        $("#search").click();
                    }
                </script>
        
                <script>
                    function PrintElem(tagid) {
                        var hashid = "#" + tagid;
                        var tagname = $(hashid).prop("diploma");
                        var attributes = "";
                        var attrs = document.getElementById(tagid).attributes;
                        $.each(attrs, function (i, elem) {
                            attributes += " " + elem.name + " ='" + elem.value + "' ";
                        })
                        var divToPrint = $(hashid).html();
                        var head = "<html><head>" + $("head").html() + "</head>";
                        var allcontent = head + "<body  onload='window.print()' >" + "<" + tagname + attributes + ">" + divToPrint + "</" + tagname + ">" + "</body></html>";
                        var newWin = window.open('', 'Print-Window');
                        newWin.document.open();
                        newWin.document.write(allcontent);
                        newWin.document.close();
                        // setTimeout(function(){newWin.close();},10);
                    }
        
                </script>
        
                <!-- Copy Text Scripts -->
                <script>
                    function copyToClipboard() {
                        /* Get the text field */
                        var copyText = document.getElementById("clipboard");
                        /* Select the text field */
                        copyText.select();
                        copyText.setSelectionRange(0, 99999); /*For mobile devices*/
        
                        /* Copy the text inside the text field */
                        document.execCommand("copy");
        
                        /* Alert the copied text */
                        alert("Texto copiado: " + copyText.value);
                    }
                </script>

    <!-- Smart Contracts JavaScript -->
    <script charset="utf-8" src="https://cdn.ethers.io/scripts/ethers-v4.min.js" type="text/javascript"></script>
    <script src="./js/abi.js"></script>
    <script src="./js/blockchain.js/"></script>
    <script src="./js/boleto.js/"></script>


    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>